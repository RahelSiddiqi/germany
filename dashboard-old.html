<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="theme-color" content="#667eea" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta
			name="apple-mobile-web-app-status-bar-style"
			content="black-translucent" />
		<meta name="mobile-web-app-capable" content="yes" />
		<title>Study Abroad Dashboard - Band 8.0-8.5 IELTS Plan</title>
		<link rel="icon" type="image/svg+xml" href="favicon.svg" />
		<link rel="manifest" href="manifest.json" />
		<!-- Google Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
			rel="stylesheet" />
		<!-- Tailwind CSS -->
		<script src="https://cdn.tailwindcss.com"></script>
		<script>
			tailwind.config = {
				theme: {
					extend: {
						fontFamily: {
							sans: ['Inter', 'system-ui', 'sans-serif'],
						},
						colors: {
							primary: {
								50: '#eef2ff',
								100: '#e0e7ff',
								200: '#c7d2fe',
								300: '#a5b4fc',
								400: '#818cf8',
								500: '#667eea',
								600: '#5b5bd6',
								700: '#4f46e5',
								800: '#4338ca',
								900: '#3730a3',
							},
							secondary: {
								500: '#764ba2',
								600: '#6b3fa0',
							},
						},
					},
				},
			};
		</script>
		<!-- Theme CSS (load first) -->
		<link rel="stylesheet" href="theme.css" />
		<!-- Page-specific styles -->
		<link rel="stylesheet" href="dashboard-band8-styles.css" />
		<link rel="stylesheet" href="enhancements.css" />
		<style>
			/* Loading screen - prevents flicker */
			#loading-screen {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
				z-index: 9999;
				transition: opacity 0.3s ease;
			}
			#loading-screen.hidden {
				opacity: 0;
				pointer-events: none;
			}
			#loading-screen .spinner {
				width: 50px;
				height: 50px;
				border: 4px solid rgba(255, 255, 255, 0.3);
				border-top-color: white;
				border-radius: 50%;
				animation: spin 1s linear infinite;
			}
			#loading-screen p {
				color: white;
				margin-top: 20px;
				font-size: 18px;
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI',
					Roboto, sans-serif;
			}
			@keyframes spin {
				to {
					transform: rotate(360deg);
				}
			}
			/* Hide main content until loaded */
			.main-content {
				opacity: 0;
				transition: opacity 0.3s ease;
			}
			.main-content.loaded {
				opacity: 1;
			}
		</style>
	</head>
	<body>
		<!-- Loading Screen -->
		<div id="loading-screen">
			<div class="spinner"></div>
			<p>Loading Dashboard...</p>
		</div>

		<nav class="navbar">
			<div class="nav-container">
				<h1 class="nav-logo">ğŸ“ Study Abroad Hub</h1>
				<button
					class="menu-toggle"
					onclick="toggleMenu()"
					aria-label="Toggle menu">
					<svg
						xmlns="http://www.w3.org/2000/svg"
						width="24"
						height="24"
						viewBox="0 0 24 24"
						fill="none"
						stroke="currentColor"
						stroke-width="2"
						stroke-linecap="round"
						stroke-linejoin="round">
						<line x1="3" y1="12" x2="21" y2="12"></line>
						<line x1="3" y1="6" x2="21" y2="6"></line>
						<line x1="3" y1="18" x2="21" y2="18"></line>
					</svg>
				</button>
			</div>
		</nav>

		<!-- Mobile sidebar overlay -->
		<div
			class="sidebar-overlay"
			id="sidebar-overlay"
			onclick="toggleMenu()"></div>

		<aside class="sidebar" id="sidebar">
			<ul class="menu">
				<li>
					<a href="#dashboard" onclick="showPage('dashboard')"
						>ğŸ“Š Dashboard</a
					>
				</li>
				<li>
					<a
						href="#band8-tracker"
						onclick="showPage('band8-tracker')"
						class="active"
						>ğŸ¯ IELTS 15-Day Plan</a
					>
				</li>
				<li>
					<a
						href="#ielts-practice"
						onclick="showPage('ielts-practice')"
						>ğŸ“š IELTS Practice</a
					>
				</li>
				<li>
					<a href="#ielts" onclick="showPage('ielts')"
						>ğŸ“ IELTS Tracker</a
					>
				</li>
				<li>
					<a href="#germany" onclick="showPage('germany')"
						>ğŸ‡©ğŸ‡ª Germany Universities</a
					>
				</li>
				<li>
					<a href="#scholarships" onclick="showPage('scholarships')"
						>ğŸ’° Scholarships Guide</a
					>
				</li>
				<li>
					<a
						href="#germany-progress"
						onclick="showPage('germany-progress')"
						>ğŸ“ˆ Germany Applications</a
					>
				</li>
				<li>
					<a href="#schengen" onclick="showPage('schengen')"
						>ğŸ‡ªğŸ‡º Schengen Universities</a
					>
				</li>
				<li>
					<a
						href="#schengen-progress"
						onclick="showPage('schengen-progress')"
						>ğŸ“Š Schengen Applications</a
					>
				</li>
				<li>
					<a href="#analytics" onclick="showPage('analytics')"
						>ğŸ“ˆ Analytics & Insights</a
					>
				</li>
				<li>
					<a href="#settings" onclick="showPage('settings')"
						>âš™ï¸ Settings</a
					>
				</li>
			</ul>
		</aside>

		<div
			class="sidebar-overlay"
			id="sidebar-overlay"
			onclick="toggleMenu()"></div>

		<main class="main-content">
			<!-- Band 8.0-8.5 IELTS Tracker Page -->
			<div id="band8-tracker" class="page active">
				<div id="band8-container">
					<div class="loading-message">
						<h2>Loading Band 8.0-8.5 IELTS Plan...</h2>
						<p>Preparing your intensive schedule...</p>
					</div>
				</div>
			</div>

			<!-- Dashboard Page -->
			<div id="dashboard" class="page">
				<div class="page-header">
					<h2 class="page-title">Dashboard Overview</h2>
					<p class="page-subtitle">
						Track your study abroad application progress
					</p>
				</div>

				<div class="stats-grid">
					<div class="stat-card ielts">
						<h3>IELTS Progress</h3>
						<p class="stat-value" id="ielts-progress">0%</p>
						<p class="stat-label" id="ielts-tasks">
							0/70 tasks completed
						</p>
					</div>
					<div class="stat-card germany">
						<h3>Germany Applications</h3>
						<p class="stat-value" id="germany-progress-stat">0%</p>
						<p class="stat-label" id="germany-unis">
							0/10 universities
						</p>
					</div>
					<div class="stat-card schengen">
						<h3>Schengen Applications</h3>
						<p class="stat-value" id="schengen-progress-stat">0%</p>
						<p class="stat-label" id="schengen-unis">
							0/8 universities
						</p>
					</div>
					<div class="stat-card streak">
						<h3>Next Deadline</h3>
						<p class="stat-value" id="next-deadline">May 31</p>
						<p class="stat-label" id="deadline-uni">TU Munich</p>
					</div>
				</div>

				<div class="card">
					<div class="card-header">
						<h3 class="card-title">Quick Actions</h3>
					</div>
					<div class="button-grid">
						<button
							onclick="showPage('ielts-practice')"
							class="btn btn-primary">
							ğŸ“š Practice IELTS
						</button>
						<button
							onclick="showPage('germany')"
							class="btn btn-secondary">
							ğŸ‡©ğŸ‡ª Germany Unis
						</button>
						<button
							onclick="showPage('schengen')"
							class="btn btn-secondary">
							ğŸ‡ªğŸ‡º Schengen Unis
						</button>
						<button
							onclick="showPage('settings')"
							class="btn btn-secondary">
							âš™ï¸ Settings
						</button>
					</div>
				</div>
			</div>

			<!-- IELTS Practice Page (Folder Browser) -->
			<div id="ielts-practice" class="page">
				<div class="folder-grid" id="ielts-folder-list">
					<!-- Folders will be loaded dynamically -->
				</div>

				<div
					id="ielts-file-list"
					class="file-list"
					style="display: none">
					<button
						class="btn btn-secondary back-btn"
						onclick="showIELTSFolders()">
						â† Back to Folders
					</button>
					<h3 id="current-folder-name">Day 1</h3>
					<div id="ielts-files"></div>
				</div>

				<div
					id="ielts-content-viewer"
					class="md-viewer-container"
					style="display: none">
					<button
						class="btn btn-secondary back-btn"
						onclick="backToFiles()">
						â† Back to Files
					</button>
					<div id="ielts-md-content" class="md-content"></div>
				</div>

				<div
					id="ielts-quiz-container"
					class="quiz-container"
					style="display: none">
					<button
						class="btn btn-secondary back-btn"
						onclick="backToFiles()">
						â† Back
					</button>
					<div id="quiz-content"></div>
				</div>
			</div>

			<!-- IELTS Tracker Page -->
			<div id="ielts" class="page">
				<h2>ğŸ“ IELTS Band 8.5 Tracker</h2>
				<div class="ielts-tracker-container">
					<div class="legend">
						<span class="legend-item listening">ğŸŸ¦ Listening</span>
						<span class="legend-item reading">ğŸŸ© Reading</span>
						<span class="legend-item writing">ğŸŸ¨ Writing</span>
						<span class="legend-item speaking">ğŸŸª Speaking</span>
						<span class="legend-item vocab">ğŸŸ§ Vocab</span>
						<span class="legend-item mock">ğŸŸ¥ Mock</span>
					</div>
					<div id="ielts-plan-content"></div>
				</div>
			</div>

			<!-- Germany Universities Page -->
			<div id="germany" class="page">
				<div class="page-header">
					<h2 class="page-title">ğŸ‡©ğŸ‡ª Germany Universities</h2>
					<p class="page-subtitle">Cyber Security Programs</p>
				</div>
				<div id="germany-list" class="university-list"></div>
			</div>

			<!-- Scholarships Guide Page -->
			<div id="scholarships" class="page">
				<div class="page-header">
					<h2 class="page-title">ğŸ’° Scholarships & Funding</h2>
					<p class="page-subtitle">Financial aid opportunities</p>
				</div>
				<div id="scholarship-content"></div>
			</div>

			<!-- Germany Progress Page -->
			<div id="germany-progress" class="page">
				<div class="page-header">
					<h2 class="page-title">ğŸ“ˆ Germany Applications</h2>
					<p class="page-subtitle">Track your application progress</p>
				</div>
				<div class="card">
					<div class="card-header">
						<h3 class="card-title">â• Add University</h3>
					</div>
					<div class="form-group">
						<label class="form-label">University Name</label>
						<input
							type="text"
							id="germany-uni-name"
							class="form-input"
							placeholder="e.g., TU Munich" />
					</div>
					<div class="form-group">
						<label class="form-label">Status</label>
						<select id="germany-uni-status" class="form-select">
							<option value="not_started">ğŸ”µ Not Started</option>
							<option value="researching">ğŸŸ¡ Researching</option>
							<option value="preparing">ğŸŸ  Preparing</option>
							<option value="submitted">ğŸŸ¢ Submitted</option>
							<option value="admitted">âœ… Admitted</option>
							<option value="rejected">âŒ Rejected</option>
						</select>
					</div>
					<button
						class="btn btn-primary"
						onclick="addGermanyUniversity()">
						Add University
					</button>
				</div>
				<div
					id="germany-progress-list"
					class="progress-list mt-4"></div>
			</div>

			<!-- Schengen Universities Page -->
			<div id="schengen" class="page">
				<div class="page-header">
					<h2 class="page-title">ğŸ‡ªğŸ‡º Schengen Universities</h2>
					<p class="page-subtitle">Cyber Security Programs</p>
				</div>
				<div id="schengen-list" class="university-list"></div>
			</div>

			<!-- Schengen Progress Page -->
			<div id="schengen-progress" class="page">
				<div class="page-header">
					<h2 class="page-title">ğŸ“Š Schengen Applications</h2>
					<p class="page-subtitle">Track your application progress</p>
				</div>
				<div class="card">
					<div class="card-header">
						<h3 class="card-title">â• Add University</h3>
					</div>
					<div class="form-group">
						<label class="form-label">University Name</label>
						<input
							type="text"
							id="schengen-uni-name"
							class="form-input"
							placeholder="e.g., University of Tartu" />
					</div>
					<div class="form-group">
						<label class="form-label">Status</label>
						<select id="schengen-uni-status" class="form-select">
							<option value="not_started">ğŸ”µ Not Started</option>
							<option value="researching">ğŸŸ¡ Researching</option>
							<option value="preparing">ğŸŸ  Preparing</option>
							<option value="submitted">ğŸŸ¢ Submitted</option>
							<option value="admitted">âœ… Admitted</option>
							<option value="rejected">âŒ Rejected</option>
						</select>
					</div>
					<button
						class="btn btn-primary"
						onclick="addSchengenUniversity()">
						Add University
					</button>
				</div>
				<div
					id="schengen-progress-list"
					class="progress-list mt-4"></div>
			</div>

			<!-- Analytics & Insights Page -->
			<div id="analytics" class="page">
				<h2>ğŸ“ˆ Analytics & Insights</h2>
				<div class="card" style="padding: 16px; margin-bottom: 16px">
					<h3>ğŸ“Š Study Progress</h3>
					<p>
						Tasks completed: <strong id="insights-tasks">0</strong>
					</p>
					<p>
						Weighted points:
						<strong id="insights-weighted">0</strong>
					</p>
				</div>
				<div class="card" style="padding: 16px">
					<h3>ğŸ”” Quick Actions</h3>
					<div
						style="
							display: flex;
							gap: 8px;
							flex-wrap: wrap;
							margin-top: 12px;
						">
						<button
							class="btn btn-secondary"
							onclick="checkDeadlinesManually()">
							ğŸ” Check Deadlines
						</button>
						<button
							class="btn btn-secondary"
							onclick="enableNotifications()">
							ğŸ”” Enable Notifications
						</button>
					</div>
				</div>
			</div>

			<!-- Settings Page -->
			<div id="settings" class="page">
				<div class="page-header">
					<h2 class="page-title">âš™ï¸ Settings</h2>
					<p class="page-subtitle">
						Manage your preferences and data
					</p>
				</div>

				<div class="settings-section">
					<h3>â˜ï¸ Cloud Sync</h3>
					<p class="text-muted mb-4">
						Sync your progress across all devices
					</p>
					<div class="settings-row">
						<div>
							<h4>Sync Status</h4>
							<p id="sync-user-info" class="text-muted">
								Not connected
							</p>
						</div>
						<div id="sync-status" class="badge"></div>
					</div>
					<div class="settings-row">
						<div>
							<h4>Quick Sync (Anonymous)</h4>
							<p class="text-muted">No account needed</p>
						</div>
						<button
							class="btn btn-primary"
							id="sync-button"
							onclick="toggleCloudSync()">
							â˜ï¸ Enable Sync
						</button>
					</div>
					<div class="settings-row">
						<div>
							<h4>Sign in with Google</h4>
							<p class="text-muted">
								Persistent sync across devices
							</p>
						</div>
						<button
							class="btn btn-secondary"
							onclick="signInWithGoogle()">
							ğŸ”— Google Sign In
						</button>
					</div>
					<div class="settings-row">
						<div>
							<h4>Manual Sync</h4>
							<p class="text-muted">Force sync now</p>
						</div>
						<button
							class="btn btn-secondary"
							onclick="manualSync()">
							ğŸ”„ Sync Now
						</button>
					</div>
				</div>

				<div class="settings-section">
					<h3>ğŸ“¦ Data Management</h3>
					<div class="settings-row">
						<div>
							<h4>Export All Data</h4>
							<p class="text-muted">
								Download backup of your progress
							</p>
						</div>
						<button class="btn btn-primary" onclick="exportData()">
							ğŸ’¾ Export
						</button>
					</div>
					<div class="settings-row">
						<div>
							<h4>Import Data</h4>
							<p class="text-muted">
								Restore from previous backup
							</p>
						</div>
						<input
							type="file"
							id="import-file"
							accept=".json"
							style="display: none"
							onchange="importData(this)" />
						<button
							class="btn btn-secondary"
							onclick="document.getElementById('import-file').click()">
							ğŸ“‚ Import
						</button>
					</div>
					<div class="settings-row">
						<div>
							<h4>Storage Usage</h4>
							<p id="storage-usage" class="text-muted">
								Calculating...
							</p>
						</div>
					</div>
				</div>

				<div class="settings-section">
					<h3>ğŸ”” Notifications</h3>
					<div class="settings-row">
						<div>
							<h4>Browser Notifications</h4>
							<p class="text-muted">Get deadline alerts</p>
						</div>
						<button
							class="btn btn-secondary"
							onclick="enableNotifications()">
							ğŸ”” Enable
						</button>
					</div>
				</div>

				<div class="settings-section">
					<h3>ğŸ¨ Appearance</h3>
					<div class="settings-row">
						<div>
							<h4>Dark Mode</h4>
							<p class="text-muted">Toggle dark theme</p>
						</div>
						<button
							class="btn btn-secondary"
							id="theme-toggle"
							onclick="toggleDarkMode()">
							ğŸŒ™ Dark Mode
						</button>
					</div>
				</div>

				<div class="settings-section" style="border-color: #fecaca">
					<h3 style="color: #dc2626">âš ï¸ Danger Zone</h3>
					<div class="settings-row">
						<div>
							<h4>Clear All Data</h4>
							<p class="text-muted">
								Delete all progress permanently
							</p>
						</div>
						<button class="btn btn-danger" onclick="clearAllData()">
							ğŸ—‘ï¸ Clear All
						</button>
					</div>
				</div>

				<div class="settings-section">
					<h3>â„¹ï¸ About</h3>
					<p class="text-muted">
						Study Abroad Dashboard v2.1<br />All data stored locally
						in your browser with optional cloud sync.
					</p>
				</div>
			</div>
		</main>

		<!-- Notification Container -->
		<div id="notification-container" class="notification-container"></div>

		<!-- Floating Action Button -->
		<button
			class="fab"
			onclick="showPage('dashboard')"
			title="Back to Dashboard">
			ğŸ 
		</button>

		<!-- Scripts -->
		<!-- Firebase SDK (Cloud Sync) -->
		<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
		<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
		<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
		<script src="firebase-sync.js"></script>
		<script src="master-plan.js"></script>
		<script src="data-manager.js"></script>
		<script src="notification-manager.js"></script>
		<script src="analytics-manager.js"></script>
		<script src="dashboard.js"></script>
		<script src="dashboard-band8-integration.js"></script>
		<script src="ielts-viewer.js"></script>
		<script src="ielts-quiz.js"></script>
		<script src="settings-ui.js"></script>
	</body>
</html>
